# 垃圾回收

## 概念

自动垃圾回收是 JavaScript 的内存管理机制。垃圾回收器会定期清理不再需要的对象从而释放内存。
JS 主要的垃圾回收算法有：`引用计数法`和`标记-清除法`。

## 垃圾回收算法

### 引用计数算法

#### 工作原理

这是最初级的垃圾回收算法，其工作原理是跟踪记录每个对象被引用的次数，垃圾回收器会定期清理被引用次数为 0 的对象

#### 局限性

该算法有个限制，即无法处理循环引用的情况，两个对象相互引用，即使它们不再被使用，引用计数算法也会考虑到它们都有一次引用，从而不会被回收导致内存泄漏

### 标记-清除算法

#### 工作原理

`标记-清除算法`的工作原理是 JS 引擎定期采用深度优先搜索来进行可达性分析，从根对象开始递归地探索引用链，从而找到所有可以获得的对象。
在可达性分析之前，引擎会将所有对象添加清除标记，分析完之后去除可访问对象的清除标记，然后清除不可访问的对象。

到目前为止，所有浏览器都使用了标记-清除算法来进行垃圾回收，只是各大浏览器厂商对此算法进行了优化，并且 JS 引擎在垃圾回收的频率上有所差异
